<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="3600px" preserveAspectRatio="none" style="width:1777px;height:3600px;background:#FAFAFA;" version="1.1" viewBox="0 0 1777 3600" width="1777px" zoomAndPan="magnify"><defs/><g><rect fill="#FAFAFA" height="3600" style="stroke:none;stroke-width:1.0;" width="1777" x="0" y="0"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="621" x="576.75" y="35.4209">SAGA Pattern - Distributed Transaction Workflow</text><rect fill="#E3F2FD" height="1178.5781" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="335.5" y="172.3047"/><rect fill="#E3F2FD" height="1105.1797" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="552.5" y="201.4375"/><rect fill="#E3F2FD" height="1017.7813" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="771.5" y="259.7031"/><rect fill="#E3F2FD" height="484.2578" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="771.5" y="1549.8125"/><rect fill="#E3F2FD" height="746.7188" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="771.5" y="2296.2656"/><rect fill="#E3F2FD" height="3188.3359" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="1049.5" y="368.2344"/><rect fill="#E3F2FD" height="834.1172" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="1544.5" y="2238"/><rect fill="#FFFFFF" height="713.4531" style="stroke:#000000;stroke-width:1.0;" width="1374.5" x="15" y="1409.0156"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="61" x2="61" y1="82.9063" y2="3565.5703"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="340.5" x2="340.5" y1="82.9063" y2="3565.5703"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="557" x2="557" y1="82.9063" y2="3565.5703"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="776" x2="776" y1="82.9063" y2="3565.5703"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1054.5" x2="1054.5" y1="82.9063" y2="3565.5703"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1318.5" x2="1318.5" y1="82.9063" y2="3565.5703"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1549.5" x2="1549.5" y1="82.9063" y2="3565.5703"/><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="53" x="35" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="39" x="42" y="71.6045">Client</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="53" x="35" y="3564.5703"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="39" x="42" y="3584.5654">Client</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="98" x="291.5" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84" x="298.5" y="71.6045">API Gateway</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="98" x="291.5" y="3564.5703"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84" x="298.5" y="3584.5654">API Gateway</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="101" x="507" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="87" x="514" y="71.6045">Loan Service</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="101" x="507" y="3564.5703"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="87" x="514" y="3584.5654">Loan Service</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="143" x="705" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="129" x="712" y="71.6045">SAGA Orchestrator</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="143" x="705" y="3564.5703"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="129" x="712" y="3584.5654">SAGA Orchestrator</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="136" x="986.5" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="122" x="993.5" y="71.6045">Customer Service</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="136" x="986.5" y="3564.5703"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="122" x="993.5" y="3584.5654">Customer Service</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="102" x="1267.5" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88" x="1274.5" y="71.6045">Kafka Events</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="102" x="1267.5" y="3564.5703"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88" x="1274.5" y="3584.5654">Kafka Events</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="128" x="1485.5" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114" x="1492.5" y="71.6045">Payment Service</text><rect fill="#E3F2FD" height="30.2969" rx="2.5" ry="2.5" style="stroke:#1976D2;stroke-width:1.0;" width="128" x="1485.5" y="3564.5703"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114" x="1492.5" y="3584.5654">Payment Service</text><rect fill="#E3F2FD" height="1178.5781" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="335.5" y="172.3047"/><rect fill="#E3F2FD" height="1105.1797" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="552.5" y="201.4375"/><rect fill="#E3F2FD" height="1017.7813" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="771.5" y="259.7031"/><rect fill="#E3F2FD" height="484.2578" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="771.5" y="1549.8125"/><rect fill="#E3F2FD" height="746.7188" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="771.5" y="2296.2656"/><rect fill="#E3F2FD" height="3188.3359" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="1049.5" y="368.2344"/><rect fill="#E3F2FD" height="834.1172" style="stroke:#1976D2;stroke-width:1.0;" width="10" x="1544.5" y="2238"/><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1765.5" x="5" y="113.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1770.5" y1="113.4727" y2="113.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1770.5" y1="116.4727" y2="116.4727"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1.0;" width="216" x="779.75" y="102.9063"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="197" x="785.75" y="118.9731">Loan Application Workflow</text><polygon fill="#1976D2" points="323.5,168.3047,333.5,172.3047,323.5,176.3047,327.5,172.3047" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="61.5" x2="329.5" y1="172.3047" y2="172.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118" x="68.5" y="152.106">POST /api/v1/loans</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="247" x="68.5" y="167.2388">{amount: 50000, rate: 0.15, term: 24}</text><polygon fill="#1976D2" points="540.5,197.4375,550.5,201.4375,540.5,205.4375,544.5,201.4375" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="345.5" x2="546.5" y1="201.4375" y2="201.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188" x="352.5" y="196.3716">Validate &amp; Create Application</text><polygon fill="#1976D2" points="1306.5,226.5703,1316.5,230.5703,1306.5,234.5703,1310.5,230.5703" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="562.5" x2="1312.5" y1="230.5703" y2="230.5703"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="253" x="569.5" y="225.5044">Publish LoanApplicationSubmittedEvent</text><polygon fill="#1976D2" points="792.5,255.7031,782.5,259.7031,792.5,263.7031,788.5,259.7031" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="259.7031" y2="259.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101" x="798.5" y="254.6372">Consume Event</text><path d="M681,272.7031 L681,312.7031 L871,312.7031 L871,282.7031 L861,272.7031 L681,272.7031 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M861,272.7031 L861,282.7031 L871,282.7031 L861,272.7031 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159" x="687" y="289.77">SAGA State: STARTED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169" x="687" y="304.9028">Step 1: Validate Customer</text><polygon fill="#1976D2" points="1306.5,335.1016,1316.5,339.1016,1306.5,343.1016,1310.5,339.1016" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="339.1016" y2="339.1016"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="231" x="788.5" y="334.0356">Publish ValidateCustomerCommand</text><polygon fill="#1976D2" points="1070.5,364.2344,1060.5,368.2344,1070.5,372.2344,1066.5,368.2344" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1064.5" x2="1317.5" y1="368.2344" y2="368.2344"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132" x="1076.5" y="363.1685">Consume Command</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="1059.5" x2="1101.5" y1="397.3672" y2="397.3672"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1101.5" x2="1101.5" y1="397.3672" y2="410.3672"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1060.5" x2="1101.5" y1="410.3672" y2="410.3672"/><polygon fill="#1976D2" points="1070.5,406.3672,1060.5,410.3672,1070.5,414.3672,1066.5,410.3672" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="160" x="1066.5" y="392.3013">Validate Customer Exists</text><polygon fill="#1976D2" points="1306.5,435.5,1316.5,439.5,1306.5,443.5,1310.5,439.5" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1059.5" x2="1312.5" y1="439.5" y2="439.5"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208" x="1066.5" y="434.4341">Publish CustomerValidatedEvent</text><polygon fill="#1976D2" points="792.5,464.6328,782.5,468.6328,792.5,472.6328,788.5,468.6328" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="468.6328" y2="468.6328"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101" x="798.5" y="463.5669">Consume Event</text><path d="M635,481.6328 L635,521.6328 L918,521.6328 L918,491.6328 L908,481.6328 L635,481.6328 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M908,481.6328 L908,491.6328 L918,491.6328 L908,481.6328 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="262" x="641" y="498.6997">SAGA State: CUSTOMER_VALIDATED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="143" x="641" y="513.8325">Step 2: Reserve Credit</text><polygon fill="#1976D2" points="1306.5,544.0313,1316.5,548.0313,1306.5,552.0313,1310.5,548.0313" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="548.0313" y2="548.0313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205" x="788.5" y="542.9653">Publish ReserveCreditCommand</text><polygon fill="#1976D2" points="1070.5,573.1641,1060.5,577.1641,1070.5,581.1641,1066.5,577.1641" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1064.5" x2="1317.5" y1="577.1641" y2="577.1641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132" x="1076.5" y="572.0981">Consume Command</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="1059.5" x2="1101.5" y1="621.4297" y2="621.4297"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1101.5" x2="1101.5" y1="621.4297" y2="634.4297"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1060.5" x2="1101.5" y1="634.4297" y2="634.4297"/><polygon fill="#1976D2" points="1070.5,630.4297,1060.5,634.4297,1070.5,638.4297,1066.5,634.4297" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116" x="1066.5" y="601.231">Check Credit Limit</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="229" x="1066.5" y="616.3638">(Available: $100k, Requested: $50k)</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="1059.5" x2="1101.5" y1="663.5625" y2="663.5625"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1101.5" x2="1101.5" y1="663.5625" y2="676.5625"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1060.5" x2="1101.5" y1="676.5625" y2="676.5625"/><polygon fill="#1976D2" points="1070.5,672.5625,1060.5,676.5625,1070.5,680.5625,1066.5,676.5625" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="1066.5" y="658.4966">Reserve Credit Amount</text><polygon fill="#1976D2" points="1306.5,701.6953,1316.5,705.6953,1306.5,709.6953,1310.5,705.6953" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1059.5" x2="1312.5" y1="705.6953" y2="705.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182" x="1066.5" y="700.6294">Publish CreditReservedEvent</text><polygon fill="#1976D2" points="792.5,730.8281,782.5,734.8281,792.5,738.8281,788.5,734.8281" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="734.8281" y2="734.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101" x="798.5" y="729.7622">Consume Event</text><path d="M651,747.8281 L651,787.8281 L902,787.8281 L902,757.8281 L892,747.8281 L651,747.8281 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M892,747.8281 L892,757.8281 L902,757.8281 L892,747.8281 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="230" x="657" y="764.895">SAGA State: CREDIT_RESERVED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128" x="657" y="780.0278">Step 3: Create Loan</text><polygon fill="#1976D2" points="1306.5,810.2266,1316.5,814.2266,1306.5,818.2266,1310.5,814.2266" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="814.2266" y2="814.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="190" x="788.5" y="809.1606">Publish CreateLoanCommand</text><polygon fill="#1976D2" points="573.5,839.3594,563.5,843.3594,573.5,847.3594,569.5,843.3594" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="567.5" x2="1317.5" y1="843.3594" y2="843.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132" x="579.5" y="838.2935">Consume Command</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="562.5" x2="604.5" y1="887.625" y2="887.625"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="604.5" x2="604.5" y1="887.625" y2="900.625"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="563.5" x2="604.5" y1="900.625" y2="900.625"/><polygon fill="#1976D2" points="573.5,896.625,563.5,900.625,573.5,904.625,569.5,900.625" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118" x="569.5" y="867.4263">Create Loan Entity</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171" x="569.5" y="882.5591">Total: $57,500 (50k * 1.15)</text><polygon fill="#1976D2" points="1306.5,925.7578,1316.5,929.7578,1306.5,933.7578,1310.5,929.7578" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="562.5" x2="1312.5" y1="929.7578" y2="929.7578"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167" x="569.5" y="924.6919">Publish LoanCreatedEvent</text><polygon fill="#1976D2" points="792.5,954.8906,782.5,958.8906,792.5,962.8906,788.5,958.8906" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="958.8906" y2="958.8906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101" x="798.5" y="953.8247">Consume Event</text><path d="M662,971.8906 L662,1011.8906 L891,1011.8906 L891,981.8906 L881,971.8906 L662,971.8906 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M881,971.8906 L881,981.8906 L891,981.8906 L881,971.8906 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="208" x="668" y="988.9575">SAGA State: LOAN_CREATED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192" x="668" y="1004.0903">Step 4: Generate Installments</text><polygon fill="#1976D2" points="1306.5,1034.2891,1316.5,1038.2891,1306.5,1042.2891,1310.5,1038.2891" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="1038.2891" y2="1038.2891"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="306" x="788.5" y="1033.2231">Publish GenerateInstallmentScheduleCommand</text><polygon fill="#1976D2" points="573.5,1063.4219,563.5,1067.4219,573.5,1071.4219,569.5,1067.4219" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="567.5" x2="1317.5" y1="1067.4219" y2="1067.4219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132" x="579.5" y="1062.356">Consume Command</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="562.5" x2="604.5" y1="1126.8203" y2="1126.8203"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="604.5" x2="604.5" y1="1126.8203" y2="1139.8203"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="563.5" x2="604.5" y1="1139.8203" y2="1139.8203"/><polygon fill="#1976D2" points="573.5,1135.8203,563.5,1139.8203,573.5,1143.8203,569.5,1139.8203" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162" x="569.5" y="1091.4888">Generate 24 Installments</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122" x="569.5" y="1106.6216">Monthly: $2,395.83</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139" x="569.5" y="1121.7544">First Due: 2025-07-01</text><polygon fill="#1976D2" points="1306.5,1164.9531,1316.5,1168.9531,1306.5,1172.9531,1310.5,1168.9531" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="562.5" x2="1312.5" y1="1168.9531" y2="1168.9531"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="283" x="569.5" y="1163.8872">Publish InstallmentScheduleGeneratedEvent</text><polygon fill="#1976D2" points="792.5,1194.0859,782.5,1198.0859,792.5,1202.0859,788.5,1198.0859" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="1198.0859" y2="1198.0859"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101" x="798.5" y="1193.02">Consume Event</text><path d="M674,1211.0859 L674,1251.0859 L878,1251.0859 L878,1221.0859 L868,1211.0859 L674,1211.0859 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M868,1211.0859 L868,1221.0859 L878,1221.0859 L868,1211.0859 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="183" x="680" y="1228.1528">SAGA State: COMPLETED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146" x="680" y="1243.2856">Transaction Successful</text><polygon fill="#1976D2" points="1306.5,1273.4844,1316.5,1277.4844,1306.5,1281.4844,1310.5,1277.4844" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="776.5" x2="1312.5" y1="1277.4844" y2="1277.4844"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="223" x="783.5" y="1272.4185">Publish LoanCreationSuccessEvent</text><polygon fill="#1976D2" points="356.5,1302.6172,346.5,1306.6172,356.5,1310.6172,352.5,1306.6172" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="350.5" x2="556.5" y1="1306.6172" y2="1306.6172"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="165" x="362.5" y="1301.5513">Return Success Response</text><polygon fill="#1976D2" points="72.5,1346.8828,62.5,1350.8828,72.5,1354.8828,68.5,1350.8828" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="66.5" x2="339.5" y1="1350.8828" y2="1350.8828"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115" x="78.5" y="1330.6841">HTTP 201 Created</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="222" x="78.5" y="1345.8169">{loanId: 123, status: "APPROVED"}</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1765.5" x="5" y="1379.4492"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1770.5" y1="1379.4492" y2="1379.4492"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1770.5" y1="1382.4492" y2="1382.4492"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1.0;" width="395" x="690.25" y="1368.8828"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="376" x="696.25" y="1384.9497">Compensation Scenario: Credit Reservation Failure</text><path d="M15,1409.0156 L326,1409.0156 L326,1416.1484 L316,1426.1484 L15,1426.1484 L15,1409.0156 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="713.4531" style="stroke:#000000;stroke-width:1.0;" width="1374.5" x="15" y="1409.0156"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="266" x="30" y="1422.0825">Alternative Flow - Insufficient Credit</text><polygon fill="#1976D2" points="328.5,1458.4141,338.5,1462.4141,328.5,1466.4141,332.5,1462.4141" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="61.5" x2="334.5" y1="1462.4141" y2="1462.4141"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118" x="68.5" y="1442.2153">POST /api/v1/loans</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="255" x="68.5" y="1457.3481">{amount: 200000, rate: 0.15, term: 12}</text><polygon fill="#1976D2" points="545.5,1487.5469,555.5,1491.5469,545.5,1495.5469,549.5,1491.5469" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="340.5" x2="551.5" y1="1491.5469" y2="1491.5469"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117" x="347.5" y="1486.481">Create Application</text><polygon fill="#1976D2" points="1306.5,1516.6797,1316.5,1520.6797,1306.5,1524.6797,1310.5,1520.6797" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="557.5" x2="1312.5" y1="1520.6797" y2="1520.6797"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="253" x="564.5" y="1515.6138">Publish LoanApplicationSubmittedEvent</text><polygon fill="#1976D2" points="792.5,1545.8125,782.5,1549.8125,792.5,1553.8125,788.5,1549.8125" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="1549.8125" y2="1549.8125"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73" x="798.5" y="1544.7466">Start SAGA</text><polygon fill="#1976D2" points="1306.5,1574.9453,1316.5,1578.9453,1306.5,1582.9453,1310.5,1578.9453" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="1578.9453" y2="1578.9453"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="231" x="788.5" y="1573.8794">Publish ValidateCustomerCommand</text><polygon fill="#1976D2" points="1070.5,1604.0781,1060.5,1608.0781,1070.5,1612.0781,1066.5,1608.0781" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1064.5" x2="1317.5" y1="1608.0781" y2="1608.0781"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119" x="1076.5" y="1603.0122">Validate Customer</text><polygon fill="#1976D2" points="1306.5,1633.2109,1316.5,1637.2109,1306.5,1641.2109,1310.5,1637.2109" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1059.5" x2="1312.5" y1="1637.2109" y2="1637.2109"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208" x="1066.5" y="1632.145">Publish CustomerValidatedEvent</text><polygon fill="#1976D2" points="792.5,1662.3438,782.5,1666.3438,792.5,1670.3438,788.5,1666.3438" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="1666.3438" y2="1666.3438"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98" x="798.5" y="1661.2778">Customer Valid</text><polygon fill="#1976D2" points="1306.5,1691.4766,1316.5,1695.4766,1306.5,1699.4766,1310.5,1695.4766" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="1695.4766" y2="1695.4766"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205" x="788.5" y="1690.4106">Publish ReserveCreditCommand</text><polygon fill="#1976D2" points="1070.5,1720.6094,1060.5,1724.6094,1070.5,1728.6094,1066.5,1724.6094" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1064.5" x2="1317.5" y1="1724.6094" y2="1724.6094"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116" x="1076.5" y="1719.5435">Check Credit Limit</text><path d="M978,1737.6094 L978,1792.6094 L1131,1792.6094 L1131,1747.6094 L1121,1737.6094 L978,1737.6094 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1121,1737.6094 L1121,1747.6094 L1131,1747.6094 L1121,1737.6094 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132" x="984" y="1754.6763">Insufficient Credit</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104" x="984" y="1769.8091">Available: $100k</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115" x="984" y="1784.9419">Requested: $200k</text><polygon fill="#1976D2" points="1306.5,1815.1406,1316.5,1819.1406,1306.5,1823.1406,1310.5,1819.1406" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1059.5" x2="1312.5" y1="1819.1406" y2="1819.1406"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="235" x="1066.5" y="1814.0747">Publish CreditReservationFailedEvent</text><polygon fill="#1976D2" points="792.5,1844.2734,782.5,1848.2734,792.5,1852.2734,788.5,1848.2734" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="1848.2734" y2="1848.2734"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147" x="798.5" y="1843.2075">Consume Failure Event</text><path d="M692,1861.2734 L692,1901.2734 L861,1901.2734 L861,1871.2734 L851,1861.2734 L692,1861.2734 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M851,1861.2734 L851,1871.2734 L861,1871.2734 L851,1861.2734 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145" x="698" y="1878.3403">SAGA State: FAILED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="698" y="1893.4731">Starting Compensation</text><polygon fill="#1976D2" points="1306.5,1923.6719,1316.5,1927.6719,1306.5,1931.6719,1310.5,1927.6719" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="1927.6719" y2="1927.6719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="260" x="788.5" y="1922.606">Publish CancelLoanApplicationCommand</text><polygon fill="#1976D2" points="568.5,1952.8047,558.5,1956.8047,568.5,1960.8047,564.5,1956.8047" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="562.5" x2="1317.5" y1="1956.8047" y2="1956.8047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117" x="574.5" y="1951.7388">Cancel Application</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="557.5" x2="599.5" y1="1985.9375" y2="1985.9375"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="599.5" x2="599.5" y1="1985.9375" y2="1998.9375"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="558.5" x2="599.5" y1="1998.9375" y2="1998.9375"/><polygon fill="#1976D2" points="568.5,1994.9375,558.5,1998.9375,568.5,2002.9375,564.5,1998.9375" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205" x="564.5" y="1980.8716">Mark Application as CANCELLED</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="823.5" y1="2033.0703" y2="2033.0703"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="823.5" x2="823.5" y1="2033.0703" y2="2046.0703"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="776.5" x2="823.5" y1="2046.0703" y2="2046.0703"/><polygon fill="#1976D2" points="786.5,2042.0703,776.5,2046.0703,786.5,2050.0703,782.5,2046.0703" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="254" x="788.5" y="2028.0044">Update SAGA Status to COMPENSATED</text><polygon fill="#1976D2" points="351.5,2066.2031,341.5,2070.2031,351.5,2074.2031,347.5,2070.2031" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="345.5" x2="556.5" y1="2070.2031" y2="2070.2031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154" x="357.5" y="2065.1372">Return Failure Response</text><polygon fill="#1976D2" points="72.5,2110.4688,62.5,2114.4688,72.5,2118.4688,68.5,2114.4688" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="66.5" x2="339.5" y1="2114.4688" y2="2114.4688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145" x="78.5" y="2094.27">HTTP 400 Bad Request</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204" x="78.5" y="2109.4028">{error: "Insufficient credit limit"}</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1765.5" x="5" y="2150.0352"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1770.5" y1="2150.0352" y2="2150.0352"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1770.5" y1="2153.0352" y2="2153.0352"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1.0;" width="215" x="780.25" y="2139.4688"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="196" x="786.25" y="2155.5356">Payment Processing SAGA</text><polygon fill="#1976D2" points="328.5,2204.8672,338.5,2208.8672,328.5,2212.8672,332.5,2208.8672" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="61.5" x2="334.5" y1="2208.8672" y2="2208.8672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176" x="68.5" y="2188.6685">POST /api/v1/payments/123</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126" x="68.5" y="2203.8013">{amount: 2395.83}</text><polygon fill="#1976D2" points="1532.5,2234,1542.5,2238,1532.5,2242,1536.5,2238" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="340.5" x2="1538.5" y1="2238" y2="2238"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111" x="347.5" y="2232.9341">Process Payment</text><polygon fill="#1976D2" points="1329.5,2263.1328,1319.5,2267.1328,1329.5,2271.1328,1325.5,2267.1328" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1323.5" x2="1543.5" y1="2267.1328" y2="2267.1328"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="193" x="1335.5" y="2262.0669">Publish PaymentInitiatedEvent</text><polygon fill="#1976D2" points="792.5,2292.2656,782.5,2296.2656,792.5,2300.2656,788.5,2296.2656" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="2296.2656" y2="2296.2656"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134" x="798.5" y="2291.1997">Start Payment SAGA</text><path d="M651,2309.2656 L651,2349.2656 L901,2349.2656 L901,2319.2656 L891,2309.2656 L651,2309.2656 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M891,2309.2656 L891,2319.2656 L901,2319.2656 L891,2309.2656 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="229" x="657" y="2326.3325">Payment SAGA State: STARTED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="163" x="657" y="2341.4653">Step 1: Validate Payment</text><polygon fill="#1976D2" points="1306.5,2371.6641,1316.5,2375.6641,1306.5,2379.6641,1310.5,2375.6641" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="2375.6641" y2="2375.6641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="225" x="788.5" y="2370.5981">Publish ValidatePaymentCommand</text><polygon fill="#1976D2" points="1532.5,2400.7969,1542.5,2404.7969,1532.5,2408.7969,1536.5,2404.7969" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1318.5" x2="1538.5" y1="2404.7969" y2="2404.7969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157" x="1325.5" y="2399.731">Validate Amount &amp; Loan</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="1554.5" x2="1596.5" y1="2479.3281" y2="2479.3281"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1596.5" x2="1596.5" y1="2479.3281" y2="2492.3281"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1555.5" x2="1596.5" y1="2492.3281" y2="2492.3281"/><polygon fill="#1976D2" points="1565.5,2488.3281,1555.5,2492.3281,1565.5,2496.3281,1561.5,2492.3281" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="138" x="1561.5" y="2428.8638">Check Payment Rules</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159" x="1561.5" y="2443.9966">- Whole installments only</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158" x="1561.5" y="2459.1294">- Max 3 months advance</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177" x="1561.5" y="2474.2622">- Calculate discount/penalty</text><polygon fill="#1976D2" points="1329.5,2517.4609,1319.5,2521.4609,1329.5,2525.4609,1325.5,2521.4609" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1323.5" x2="1543.5" y1="2521.4609" y2="2521.4609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="202" x="1335.5" y="2516.395">Publish PaymentValidatedEvent</text><polygon fill="#1976D2" points="792.5,2546.5938,782.5,2550.5938,792.5,2554.5938,788.5,2550.5938" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="2550.5938" y2="2550.5938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92" x="798.5" y="2545.5278">Payment Valid</text><path d="M643,2563.5938 L643,2603.5938 L909,2603.5938 L909,2573.5938 L899,2563.5938 L643,2563.5938 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M899,2563.5938 L899,2573.5938 L909,2573.5938 L899,2563.5938 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="245" x="649" y="2580.6606">Payment SAGA State: VALIDATED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182" x="649" y="2595.7935">Step 2: Process Installments</text><polygon fill="#1976D2" points="1306.5,2625.9922,1316.5,2629.9922,1306.5,2633.9922,1310.5,2629.9922" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="2629.9922" y2="2629.9922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="244" x="788.5" y="2624.9263">Publish ProcessInstallmentsCommand</text><polygon fill="#1976D2" points="1532.5,2655.125,1542.5,2659.125,1532.5,2663.125,1536.5,2659.125" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1318.5" x2="1538.5" y1="2659.125" y2="2659.125"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111" x="1325.5" y="2654.0591">Process Payment</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="1554.5" x2="1596.5" y1="2718.5234" y2="2718.5234"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1596.5" x2="1596.5" y1="2718.5234" y2="2731.5234"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1555.5" x2="1596.5" y1="2731.5234" y2="2731.5234"/><polygon fill="#1976D2" points="1565.5,2727.5234,1555.5,2731.5234,1565.5,2735.5234,1561.5,2731.5234" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="197" x="1561.5" y="2683.1919">Calculate Payment Distribution</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196" x="1561.5" y="2698.3247">Early Payment Discount: $2.39</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="181" x="1561.5" y="2713.4575">Effective Amount: $2,393.44</text><polygon fill="#1976D2" points="1329.5,2756.6563,1319.5,2760.6563,1329.5,2764.6563,1325.5,2760.6563" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="1323.5" x2="1543.5" y1="2760.6563" y2="2760.6563"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183" x="1335.5" y="2755.5903">Publish InstallmentPaidEvent</text><polygon fill="#1976D2" points="792.5,2785.7891,782.5,2789.7891,792.5,2793.7891,788.5,2789.7891" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="2789.7891" y2="2789.7891"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141" x="798.5" y="2784.7231">Installment Processed</text><polygon fill="#1976D2" points="1306.5,2814.9219,1316.5,2818.9219,1306.5,2822.9219,1310.5,2818.9219" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="781.5" x2="1312.5" y1="2818.9219" y2="2818.9219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="228" x="788.5" y="2813.856">Publish CheckLoanStatusCommand</text><polygon fill="#1976D2" points="568.5,2844.0547,558.5,2848.0547,568.5,2852.0547,564.5,2848.0547" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="562.5" x2="1317.5" y1="2848.0547" y2="2848.0547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="574.5" y="2842.9888">Check if Loan Fully Paid</text><line style="stroke:#1976D2;stroke-width:1.0;" x1="557.5" x2="599.5" y1="2892.3203" y2="2892.3203"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="599.5" x2="599.5" y1="2892.3203" y2="2905.3203"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="558.5" x2="599.5" y1="2905.3203" y2="2905.3203"/><polygon fill="#1976D2" points="568.5,2901.3203,558.5,2905.3203,568.5,2909.3203,564.5,2905.3203" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128" x="564.5" y="2872.1216">Update Loan Status</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176" x="564.5" y="2887.2544">(23 installments remaining)</text><polygon fill="#1976D2" points="1306.5,2930.4531,1316.5,2934.4531,1306.5,2938.4531,1310.5,2934.4531" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="557.5" x2="1312.5" y1="2934.4531" y2="2934.4531"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="213" x="564.5" y="2929.3872">Publish LoanStatusUpdatedEvent</text><polygon fill="#1976D2" points="792.5,2959.5859,782.5,2963.5859,792.5,2967.5859,788.5,2963.5859" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="786.5" x2="1317.5" y1="2963.5859" y2="2963.5859"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101" x="798.5" y="2958.52">Status Updated</text><path d="M639,2976.5859 L639,3016.5859 L913,3016.5859 L913,2986.5859 L903,2976.5859 L639,2976.5859 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M903,2976.5859 L903,2986.5859 L913,2986.5859 L903,2976.5859 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="253" x="645" y="2993.6528">Payment SAGA State: COMPLETED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129" x="645" y="3008.7856">Payment Successful</text><polygon fill="#1976D2" points="1306.5,3038.9844,1316.5,3042.9844,1306.5,3046.9844,1310.5,3042.9844" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="776.5" x2="1312.5" y1="3042.9844" y2="3042.9844"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="212" x="783.5" y="3037.9185">Publish PaymentCompletedEvent</text><polygon fill="#1976D2" points="351.5,3068.1172,341.5,3072.1172,351.5,3076.1172,347.5,3072.1172" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="345.5" x2="1548.5" y1="3072.1172" y2="3072.1172"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170" x="357.5" y="3067.0513">Return Payment Summary</text><polygon fill="#1976D2" points="72.5,3112.3828,62.5,3116.3828,72.5,3120.3828,68.5,3116.3828" style="stroke:#1976D2;stroke-width:1.0;"/><line style="stroke:#1976D2;stroke-width:1.0;" x1="66.5" x2="339.5" y1="3116.3828" y2="3116.3828"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82" x="78.5" y="3096.1841">HTTP 200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="252" x="78.5" y="3111.3169">{paidAmount: 2393.44, discount: 2.39}</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1765.5" x="5" y="3144.9492"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1770.5" y1="3144.9492" y2="3144.9492"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1770.5" y1="3147.9492" y2="3147.9492"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1.0;" width="205" x="785.25" y="3134.3828"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="186" x="791.25" y="3150.4497">SAGA State Management</text><path d="M622,3172.5156 L622,3348.5156 L930,3348.5156 L930,3182.5156 L920,3172.5156 L622,3172.5156 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M920,3172.5156 L920,3182.5156 L930,3182.5156 L920,3172.5156 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="180" x="628" y="3189.5825">SAGA State Persistence:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="275" x="628" y="3204.7153">- saga_states table in banking_gateway DB</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="197" x="628" y="3219.8481">- Timeout detection: 5 minutes</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="244" x="628" y="3234.981">- Automatic compensation on timeout</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188" x="628" y="3250.1138">- Event sourcing for audit trail</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4" x="628" y="3265.2466">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="179" x="628" y="3280.3794">Compensation Patterns:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192" x="628" y="3295.5122">- Credit release on loan failure</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="257" x="628" y="3310.645">- Payment reversal on processing failure</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="287" x="628" y="3325.7778">- Application cancellation on validation failure</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="220" x="628" y="3340.9106">- Eventual consistency guarantees</text><path d="M1153,3358.9766 L1153,3549.9766 L1483,3549.9766 L1483,3368.9766 L1473,3358.9766 L1153,3358.9766 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1473,3358.9766 L1473,3368.9766 L1483,3368.9766 L1473,3358.9766 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="98" x="1159" y="3376.0435">Event Topics:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="309" x="1159" y="3391.1763">- customer-events (validation, credit operations)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="254" x="1159" y="3406.3091">- loan-events (creation, status updates)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="276" x="1159" y="3421.4419">- payment-events (processing, completion)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="234" x="1159" y="3436.5747">- credit-events (reservation, release)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="286" x="1159" y="3451.7075">- saga-events (orchestration, compensation)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4" x="1159" y="3466.8403">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="123" x="1159" y="3481.9731">Event Reliability:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="1159" y="3497.106">- At-least-once delivery</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158" x="1159" y="3512.2388">- Idempotent consumers</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203" x="1159" y="3527.3716">- Dead letter queues for failures</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152" x="1159" y="3542.5044">- Event replay capability</text><!--SRC=[hLXjRzis4FwkNy5rmz0OTkENP5qDT83gbyweqnYssw90W82Hw8ImJ6aKbSuOyjztHueIPLkEMpG94aSy7k-UUtcE-aKzi0qZIKIvyBnqpKL29TsGEngixsMSYN0GHx4aluvz_7OauBVY0K-eKEG_Zy3NkzqzezwuEnwQjLY6JERFEszU_p7iUa-EjfJzap4Hi5oLBsNyhIgDZwTynQPSi4FQAkirbZnvdk8gOcJXl_V9Z2h5f20jCkIfalmkKomaIqb5IWF5Oq6-n7AzYk9ltYyXMu5UilZqRZbPJaTazCZ0xw7ay1Ui3HwuOe7A92FVk7eWWtYJC52ZjUJdf9xdOlPY477GyOBGb0ocaz77PNNPdqt8UwhODxhLCk_zvUYB_xKgD8sf80ic7td0jDJqslzO5T6kNeE537oaAfPQ3f_kc9EbAjumML4t-BHONb-DvbNH3tIrfWQ2L8jzyCSVTjJDw7Q34BdQPlxNA_JJU_kMQClz98buG2jOaxTlFSy0Gbf_MRT9dyok5qjoJXD-_jWvZs1xUYF-enk8ikgJopPyDGauoFga_QfpsII0-QPFkXTF7aRp4LOA33sh5Gv0n43xPnhn46L-9mF9y8DZNAb1u-lfFR1N-uscPNSHJn-qKywsHNQtuH3xK4Fb6MdOfaFIXoGHQGR5PrQB8tHeF173n_WHus6a6mtzOQ6qYukbFr-EXet6ZLWebf2Euu6DfEVf7GVijA9M4j9rGqLOMcZZxbXfPGexYzpm2kdgpZs3oEXVABIq8hzhcfMrcq_2xZcqx86td_tfPEYxm7NxPCvII5A6SG-vgaSjbpDYtmDP7K231nQiysEXTq6kt8YN_YFb4RsBmEpVEktskWddGczC0GfuSjbUdzMfg_f1V5qQny7Malc-duFqV3ISB6_deyLe_jc1kTUtPOKrKe-n4KAPFO3pGjq3rnQZNI-F8IC1xNvx8vQneX6Yzxe9ZOAy11H9WtIWJPmThMMZwwS0WyVS0ZgLvBlea_TCCEnQP29IC3B2ffdMusF57Ua5jFOmYzYF0bPOqBse674ZhcAX7g8j0DTjzjvSllgpToF6NAP0V1cur6rtBrljrwrsfxuZ7h3JdlTpyktwQZOTvPYwrBt8We2bwIgBwi4iGgnxjPOtfuPifnjRzqescZDW- -8OhBq436VkLiqL3jFafDOdVo-NCq2la-Tg23o6V3Q10kzqUqq2aAaixUCCC9jVGnczU7Br5Ym6D5ePD1O14rJok6zRWAbiipY6jeBp2T8hpaO9yICSIs0LUiOOcRU5uSfMAo1nfEwy7-9WzTryt6tN4NAd-wHLxbFm0TxLGzqFaItkt4qjo1cfJ4HnkHfZVA9_VIzfLauwHdy6oU_dlaEk59IgPPyt_Y1trLc-pqlb0MKzEXiQZGE9WnMvIsOtmYKpI99rgVbKejBHncm-Ya_UHMpMbv8xNXpiAcD_ChLj6eTQSLyfjEVX7b2uoqGx6NeGTflxUaDjxkTILrIkAqCpZkZ-ny5e2kRkMvNxzYa9RPPh1xEKg5Xtpj771VAHthJRymfjjRtFOblqlfsohlQx2o3UTpIqqmpq2WQNF0bThf8xWScw2BCEsXv3me8-PwyJCnbZlyM8Q7zEkYmaPdDw3jtLxL66qvxS7frVKL23EScUNCwznIt6oXw8Vxvf8hZYzLHd-b5nKqBKdxy5kEAdt0Qi_SzU1dB1lJ6YXAJGQKPBk2gPOSu1eXGsJSHQEmVY1tveaIyFCTo_kJDda5X4Mrowel-I7jdWq94I6ZvYIU3p0Os2BC9pGvu6UF8vb2ADrFQK63npaR06cZvwAk07xn4sOqwRv79fL_W8zBlPM8DvWPGrkdYp0TtYHeoeZBRkMc0guRVkgzuRM5wjMA370NzZ5s3mwxswk3YAjEF3ZF8Qe1qXwmqBZrm4C7qmlKp7gXrkTPRnbPdtnrca_UFxKsxU1CqB4wqIxbhTNZKJ9TjGBg2v7ByMcFr6OtrfOv_DPKxEgyeuMmYSCCgMnPj4hB1gRuvrWhZNpilZ06gvTJVRbdTac6sJwm_GMnF0tY_xAwPEioXRU0HvzgGRUkarrBsWzqoVZUsy2fNdCZEPCPb2HkERmdwZuRL8Ik_fBSxB34WD1mq8ABcZOWr1lBqthy_8y1r8Blc6nPa2diCtTL0EVN99Dbnai1MM_GpcAI3LW0JkI0q_ocm46VFIBuqp6I01hM99Q8PifIHGeGUc7dplPopDnod98aPJXefnPYOhGw8WOF6N37nFQOGYIKbtfQ0x00HwReWAOnzDjyF_oWtQxWmq1a3J1hujkSyeN9SK0- -1PFL4v69lNkar6iRdPPpm87Sao4VF5jCl0CdByiocfUyumIiUF4dFO0SwMaW7-ONBNdD8fcj42-P4NSYMxZTrM22rOITAcdCAGLbEXaqByLcU7eLGNBm4DQOwiJhp2bVdBEBqZaTSROs_lcgXFjMAyVrq2Ck0pnOM9Y7R900OJYrct9IOIKC6KmvO2h4dCEh0iACp9Gz7MkIHP4a4oHdG93-kZCF_]--></g></svg>