<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="3863px" preserveAspectRatio="none" style="width:3338px;height:3863px;background:#FFFFFF;" version="1.1" viewBox="0 0 3338 3863" width="3338px" zoomAndPan="magnify"><defs/><g><g><title>PaymentController</title><rect fill="#FFFFFF" height="372.7266" style="stroke:#181818;stroke-width:1;" width="10" x="600.4731" y="126.4199"/></g><g><title>PaymentApplicationService</title><rect fill="#FFFFFF" height="285.7949" style="stroke:#181818;stroke-width:1;" width="10" x="987.4512" y="213.3516"/></g><g><title>LoanApplicationService</title><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1;" width="10" x="1392.1812" y="285.9727"/></g><g><title>LoanApplicationService</title><rect fill="#FFFFFF" height="202.5527" style="stroke:#181818;stroke-width:1;" width="10" x="1392.1812" y="2382.8262"/></g><g><title>CustomerApplicationService</title><rect fill="#FFFFFF" height="101.6211" style="stroke:#181818;stroke-width:1;" width="10" x="1700.5605" y="2483.7578"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="113.9316" style="stroke:#181818;stroke-width:1;" width="10" x="1880.2266" y="1323.8203"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="156.2422" style="stroke:#181818;stroke-width:1;" width="10" x="1880.2266" y="2027.7207"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="1880.2266" y="2825.9316"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1;" width="10" x="1880.2266" y="3200.3477"/></g><g><title>Loan</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="2174.9058" y="315.2832"/></g><g><title>Loan</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="2174.9058" y="586.7227"/></g><g><title>Loan</title><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1;" width="10" x="2174.9058" y="1825.8574"/></g><g><title>Loan</title><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1;" width="10" x="2174.9058" y="2412.1367"/></g><g><title>LoanInstallment</title><rect fill="#FFFFFF" height="186.8633" style="stroke:#181818;stroke-width:1;" width="10" x="2415.2554" y="698.9648"/></g><g><title>LoanInstallment</title><rect fill="#FFFFFF" height="204.5527" style="stroke:#181818;stroke-width:1;" width="10" x="2415.2554" y="1534.6836"/></g><g><title>PaymentCalculationService</title><rect fill="#FFFFFF" height="465.6582" style="stroke:#181818;stroke-width:1;" width="10" x="2748.2129" y="645.3438"/></g><g><title>PaymentRepository</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="3090.9502" y="2256.584"/></g><g><title>PaymentRepository</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="3090.9502" y="3141.7266"/></g><g><title>PaymentRepository</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="3090.9502" y="3271.9688"/></g><g><title>EventPublisher</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="3229.4248" y="2555.3789"/></g><g><title>EventPublisher</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="3229.4248" y="2614.6895"/></g><g><title>EventPublisher</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="3229.4248" y="2766.6211"/></g><rect fill="none" height="2614.5801" style="stroke:#000000;stroke-width:1.5;" width="3311.0469" x="10" y="431.2148"/><rect fill="none" height="349.416" style="stroke:#000000;stroke-width:1.5;" width="746.7944" x="2349.1558" y="660.3438"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="390.8188" x="2645.9204" y="943.1387"/><rect fill="none" height="1912.793" style="stroke:#000000;stroke-width:1.5;" width="3291.0469" x="20" y="1126.002"/><rect fill="none" height="258.1738" style="stroke:#000000;stroke-width:1.5;" width="1841.5737" x="884.5708" y="1496.0625"/><rect fill="none" height="308.4844" style="stroke:#000000;stroke-width:1.5;" width="2416.4761" x="884.5708" y="2344.2051"/><rect fill="none" height="280.7949" style="stroke:#000000;stroke-width:1.5;" width="3157.8027" x="20" y="3103.1055"/><g><title>Customer/Admin</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="91.7822" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="95" x2="95" y1="36.4883" y2="3828.3535"/></g><g><title>PaymentController</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="601.4731" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="604.603" x2="604.603" y1="36.4883" y2="3828.3535"/></g><g><title>PaymentApplicationService</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="988.4512" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="991.5708" x2="991.5708" y1="36.4883" y2="3828.3535"/></g><g><title>LoanApplicationService</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="1393.1812" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1396.8481" x2="1396.8481" y1="36.4883" y2="3828.3535"/></g><g><title>CustomerApplicationService</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="1701.5605" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1705.4966" x2="1705.4966" y1="36.4883" y2="3828.3535"/></g><g><title>Payment</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="1881.2266" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1884.437" x2="1884.437" y1="36.4883" y2="3828.3535"/></g><g><title>Loan</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="2175.9058" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2179.6636" x2="2179.6636" y1="36.4883" y2="3828.3535"/></g><g><title>LoanInstallment</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="2416.2554" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2420.1558" x2="2420.1558" y1="36.4883" y2="3828.3535"/></g><g><title>PaymentCalculationService</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="2749.2129" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2752.9204" x2="2752.9204" y1="36.4883" y2="3828.3535"/></g><g><title>PaymentRepository</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="3091.9502" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3095.0977" x2="3095.0977" y1="36.4883" y2="3828.3535"/></g><g><title>EventPublisher</title><rect fill="#000000" fill-opacity="0.00000" height="3791.8652" width="8" x="3230.4248" y="36.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3233.8027" x2="3233.8027" y1="36.4883" y2="3828.3535"/></g><g class="participant participant-head" data-participant="User"><rect fill="#4A90E2" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.5645" x="30" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.5645" x="37" y="25.5352">Customer/Admin</text></g><g class="participant participant-tail" data-participant="User"><rect fill="#4A90E2" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.5645" x="30" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.5645" x="37" y="3847.8887">Customer/Admin</text></g><g class="participant participant-head" data-participant="Controller"><rect fill="#F5A623" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139.7402" x="535.603" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.7402" x="542.603" y="25.5352">PaymentController</text></g><g class="participant participant-tail" data-participant="Controller"><rect fill="#F5A623" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139.7402" x="535.603" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.7402" x="542.603" y="3847.8887">PaymentController</text></g><g class="participant participant-head" data-participant="PaymentService"><rect fill="#7ED321" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195.7607" x="894.5708" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181.7607" x="901.5708" y="25.5352">PaymentApplicationService</text></g><g class="participant participant-tail" data-participant="PaymentService"><rect fill="#7ED321" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195.7607" x="894.5708" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181.7607" x="901.5708" y="3847.8887">PaymentApplicationService</text></g><g class="participant participant-head" data-participant="LoanService"><rect fill="#7ED321" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170.666" x="1311.8481" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.666" x="1318.8481" y="25.5352">LoanApplicationService</text></g><g class="participant participant-tail" data-participant="LoanService"><rect fill="#7ED321" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170.666" x="1311.8481" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.666" x="1318.8481" y="3847.8887">LoanApplicationService</text></g><g class="participant participant-head" data-participant="CustomerService"><rect fill="#7ED321" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="204.1279" x="1603.4966" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190.1279" x="1610.4966" y="25.5352">CustomerApplicationService</text></g><g class="participant participant-tail" data-participant="CustomerService"><rect fill="#7ED321" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="204.1279" x="1603.4966" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190.1279" x="1610.4966" y="3847.8887">CustomerApplicationService</text></g><g class="participant participant-head" data-participant="PaymentAggregate"><rect fill="#BD10E0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.5791" x="1849.437" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.5791" x="1856.437" y="25.5352">Payment</text></g><g class="participant participant-tail" data-participant="PaymentAggregate"><rect fill="#BD10E0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.5791" x="1849.437" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.5791" x="1856.437" y="3847.8887">Payment</text></g><g class="participant participant-head" data-participant="LoanAggregate"><rect fill="#BD10E0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46.4844" x="2156.6636" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.4844" x="2163.6636" y="25.5352">Loan</text></g><g class="participant participant-tail" data-participant="LoanAggregate"><rect fill="#BD10E0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46.4844" x="2156.6636" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.4844" x="2163.6636" y="3847.8887">Loan</text></g><g class="participant participant-head" data-participant="Installment"><rect fill="#BD10E0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.1992" x="2359.1558" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.1992" x="2366.1558" y="25.5352">LoanInstallment</text></g><g class="participant participant-tail" data-participant="Installment"><rect fill="#BD10E0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.1992" x="2359.1558" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.1992" x="2366.1558" y="3847.8887">LoanInstallment</text></g><g class="participant participant-head" data-participant="CalcService"><rect fill="#BD10E0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194.585" x="2655.9204" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.585" x="2662.9204" y="25.5352">PaymentCalculationService</text></g><g class="participant participant-tail" data-participant="CalcService"><rect fill="#BD10E0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194.585" x="2655.9204" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.585" x="2662.9204" y="3847.8887">PaymentCalculationService</text></g><g class="participant participant-head" data-participant="PaymentRepo"><rect fill="#FF6B6B" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.7051" x="3024.0977" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.7051" x="3031.0977" y="25.5352">PaymentRepository</text></g><g class="participant participant-tail" data-participant="PaymentRepo"><rect fill="#FF6B6B" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.7051" x="3024.0977" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.7051" x="3031.0977" y="3847.8887">PaymentRepository</text></g><g class="participant participant-head" data-participant="EventPub"><rect fill="#FF6B6B" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.2441" x="3177.8027" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.2441" x="3184.8027" y="25.5352">EventPublisher</text></g><g class="participant participant-tail" data-participant="EventPub"><rect fill="#FF6B6B" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.2441" x="3177.8027" y="3827.3535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.2441" x="3184.8027" y="3847.8887">EventPublisher</text></g><g><title>PaymentController</title><rect fill="#FFFFFF" height="372.7266" style="stroke:#181818;stroke-width:1;" width="10" x="600.4731" y="126.4199"/></g><g><title>PaymentApplicationService</title><rect fill="#FFFFFF" height="285.7949" style="stroke:#181818;stroke-width:1;" width="10" x="987.4512" y="213.3516"/></g><g><title>LoanApplicationService</title><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1;" width="10" x="1392.1812" y="285.9727"/></g><g><title>LoanApplicationService</title><rect fill="#FFFFFF" height="202.5527" style="stroke:#181818;stroke-width:1;" width="10" x="1392.1812" y="2382.8262"/></g><g><title>CustomerApplicationService</title><rect fill="#FFFFFF" height="101.6211" style="stroke:#181818;stroke-width:1;" width="10" x="1700.5605" y="2483.7578"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="113.9316" style="stroke:#181818;stroke-width:1;" width="10" x="1880.2266" y="1323.8203"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="156.2422" style="stroke:#181818;stroke-width:1;" width="10" x="1880.2266" y="2027.7207"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="1880.2266" y="2825.9316"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1;" width="10" x="1880.2266" y="3200.3477"/></g><g><title>Loan</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="2174.9058" y="315.2832"/></g><g><title>Loan</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="2174.9058" y="586.7227"/></g><g><title>Loan</title><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1;" width="10" x="2174.9058" y="1825.8574"/></g><g><title>Loan</title><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1;" width="10" x="2174.9058" y="2412.1367"/></g><g><title>LoanInstallment</title><rect fill="#FFFFFF" height="186.8633" style="stroke:#181818;stroke-width:1;" width="10" x="2415.2554" y="698.9648"/></g><g><title>LoanInstallment</title><rect fill="#FFFFFF" height="204.5527" style="stroke:#181818;stroke-width:1;" width="10" x="2415.2554" y="1534.6836"/></g><g><title>PaymentCalculationService</title><rect fill="#FFFFFF" height="465.6582" style="stroke:#181818;stroke-width:1;" width="10" x="2748.2129" y="645.3438"/></g><g><title>PaymentRepository</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="3090.9502" y="2256.584"/></g><g><title>PaymentRepository</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="3090.9502" y="3141.7266"/></g><g><title>PaymentRepository</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="3090.9502" y="3271.9688"/></g><g><title>EventPublisher</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="3229.4248" y="2555.3789"/></g><g><title>EventPublisher</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="3229.4248" y="2614.6895"/></g><g><title>EventPublisher</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="3229.4248" y="2766.6211"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="67.1436"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="67.1436" y2="67.1436"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="70.1436" y2="70.1436"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="210.8154" x="1560.1157" y="56.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="192.5308" x="1566.1157" y="73.0566">Payment Processing Request</text><g class="message" data-participant-1="User" data-participant-2="Controller"><polygon fill="#181818" points="588.4731,122.4199,598.4731,126.4199,588.4731,130.4199,592.4731,126.4199" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="95.7822" x2="594.4731" y1="126.4199" y2="126.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246.854" x="102.7822" y="106.3672">POST /api/v1/loans/{loanId}/payments</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.0073" x="102.7822" y="121.6777">{paymentAmount}</text></g><g class="message" data-participant-1="Controller" data-participant-2="Controller"><line style="stroke:#181818;stroke-width:1;" x1="610.4731" x2="652.4731" y1="171.041" y2="171.041"/><line style="stroke:#181818;stroke-width:1;" x1="652.4731" x2="652.4731" y1="171.041" y2="184.041"/><line style="stroke:#181818;stroke-width:1;" x1="611.4731" x2="652.4731" y1="184.041" y2="184.041"/><polygon fill="#181818" points="621.4731,180.041,611.4731,184.041,621.4731,188.041,617.4731,184.041" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.3179" x="617.4731" y="150.9883">Validate request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.5352" x="617.4731" y="166.2988">(amount &gt; 0)</text></g><g class="message" data-participant-1="Controller" data-participant-2="PaymentService"><polygon fill="#181818" points="975.4512,209.3516,985.4512,213.3516,975.4512,217.3516,979.4512,213.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="610.4731" x2="981.4512" y1="213.3516" y2="213.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276.3579" x="617.4731" y="208.6094">processPayment(ProcessPaymentCommand)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="242.0068"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="242.0068" y2="242.0068"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="245.0068" y2="245.0068"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="122.3862" x="1604.3303" y="231.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104.1016" x="1610.3303" y="247.9199">Loan Validation</text><g class="message" data-participant-1="PaymentService" data-participant-2="LoanService"><polygon fill="#181818" points="1380.1812,281.9727,1390.1812,285.9727,1380.1812,289.9727,1384.1812,285.9727" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="997.4512" x2="1386.1812" y1="285.9727" y2="285.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.7476" x="1004.4512" y="281.2305">getLoan(loanId)</text></g><g class="message" data-participant-1="LoanService" data-participant-2="LoanAggregate"><polygon fill="#181818" points="2162.9058,311.2832,2172.9058,315.2832,2162.9058,319.2832,2166.9058,315.2832" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1402.1812" x2="2168.9058" y1="315.2832" y2="315.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.3569" x="1409.1812" y="310.541">findById(loanId)</text></g><g class="message" data-participant-1="LoanAggregate" data-participant-2="LoanService"><polygon fill="#181818" points="1413.1812,340.5938,1403.1812,344.5938,1413.1812,348.5938,1409.1812,344.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1407.1812" x2="2178.9058" y1="344.5938" y2="344.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.7124" x="1419.1812" y="339.8516">loan details</text></g><g class="message" data-participant-1="LoanService" data-participant-2="PaymentService"><polygon fill="#181818" points="1008.4512,369.9043,998.4512,373.9043,1008.4512,377.9043,1004.4512,373.9043" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1002.4512" x2="1396.1812" y1="373.9043" y2="373.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26.9902" x="1014.4512" y="369.1621">loan</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentService"><line style="stroke:#181818;stroke-width:1;" x1="997.4512" x2="1039.4512" y1="403.2148" y2="403.2148"/><line style="stroke:#181818;stroke-width:1;" x1="1039.4512" x2="1039.4512" y1="403.2148" y2="416.2148"/><line style="stroke:#181818;stroke-width:1;" x1="998.4512" x2="1039.4512" y1="416.2148" y2="416.2148"/><polygon fill="#181818" points="1008.4512,412.2148,998.4512,416.2148,1008.4512,420.2148,1004.4512,416.2148" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238.2212" x="1004.4512" y="398.4727">Validate loan exists and not fully paid</text></g><path d="M10,431.2148 L72.1387,431.2148 L72.1387,438.5254 L62.1387,448.5254 L10,448.5254 L10,431.2148" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="2614.5801" style="stroke:#000000;stroke-width:1.5;" width="3311.0469" x="10" y="431.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="25" y="444.7832">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140.6206" x="87.1387" y="443.8496">[Loan Already Fully Paid]</text><g class="message" data-participant-1="PaymentService" data-participant-2="Controller"><polygon fill="#181818" points="621.4731,465.8359,611.4731,469.8359,621.4731,473.8359,617.4731,469.8359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="615.4731" x2="986.4512" y1="469.8359" y2="469.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331.9126" x="627.4731" y="465.0938">throw BusinessException("Loan is already fully paid")</text></g><g class="message" data-participant-1="Controller" data-participant-2="User"><polygon fill="#181818" points="106.7822,495.1465,96.7822,499.1465,106.7822,503.1465,102.7822,499.1465" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="100.7822" x2="604.4731" y1="499.1465" y2="499.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1709" x="112.7822" y="494.4043">400 Bad Request</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="3321.0469" y1="508.1465" y2="508.1465"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177.5415" x="15" y="518.7813">[Loan Has Unpaid Installments]</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="542.7568"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="542.7568" y2="542.7568"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="545.7568" y2="545.7568"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="154.5879" x="1588.2295" y="532.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="136.3032" x="1594.2295" y="548.6699">Payment Calculation</text><g class="message" data-participant-1="PaymentService" data-participant-2="LoanAggregate"><polygon fill="#181818" points="2162.9058,582.7227,2172.9058,586.7227,2162.9058,590.7227,2166.9058,586.7227" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="2168.9058" y1="586.7227" y2="586.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.9761" x="999.4512" y="581.9805">getUnpaidInstallments()</text></g><g class="message" data-participant-1="LoanAggregate" data-participant-2="PaymentService"><polygon fill="#181818" points="1003.4512,612.0332,993.4512,616.0332,1003.4512,620.0332,999.4512,616.0332" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="997.4512" x2="2178.9058" y1="616.0332" y2="616.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.3174" x="1009.4512" y="611.291">List&lt;LoanInstallment&gt;</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="CalcService"><polygon fill="#181818" points="2736.2129,641.3438,2746.2129,645.3438,2736.2129,649.3438,2740.2129,645.3438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="2742.2129" y1="645.3438" y2="645.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="342.4688" x="999.4512" y="640.6016">calculatePayment(installments, amount, paymentDate)</text></g><path d="M2349.1558,660.3438 L2423.6025,660.3438 L2423.6025,667.6543 L2413.6025,677.6543 L2349.1558,677.6543 L2349.1558,660.3438" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="349.416" style="stroke:#000000;stroke-width:1.5;" width="746.7944" x="2349.1558" y="660.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="2364.1558" y="673.9121">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="244.6748" x="2438.6025" y="672.9785">[For each unpaid installment (by due date)]</text><g class="message" data-participant-1="CalcService" data-participant-2="Installment"><polygon fill="#181818" points="2436.2554,694.9648,2426.2554,698.9648,2436.2554,702.9648,2432.2554,698.9648" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="2430.2554" x2="2747.2129" y1="698.9648" y2="698.9648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303.9575" x="2442.2554" y="694.2227">calculateEffectivePaymentAmount(paymentDate)</text></g><g class="message" data-participant-1="Installment" data-participant-2="Installment"><line style="stroke:#181818;stroke-width:1;" x1="2425.2554" x2="2467.2554" y1="743.5859" y2="743.5859"/><line style="stroke:#181818;stroke-width:1;" x1="2467.2554" x2="2467.2554" y1="743.5859" y2="756.5859"/><line style="stroke:#181818;stroke-width:1;" x1="2426.2554" x2="2467.2554" y1="756.5859" y2="756.5859"/><polygon fill="#181818" points="2436.2554,752.5859,2426.2554,756.5859,2436.2554,760.5859,2432.2554,756.5859" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286.6284" x="2432.2554" y="723.5332">calculateEarlyPaymentDiscount(paymentDate)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.6973" x="2432.2554" y="738.8438">(amount &#215; 0.001 &#215; daysBefore)</text></g><g class="message" data-participant-1="Installment" data-participant-2="Installment"><line style="stroke:#181818;stroke-width:1;" x1="2425.2554" x2="2467.2554" y1="801.207" y2="801.207"/><line style="stroke:#181818;stroke-width:1;" x1="2467.2554" x2="2467.2554" y1="801.207" y2="814.207"/><line style="stroke:#181818;stroke-width:1;" x1="2426.2554" x2="2467.2554" y1="814.207" y2="814.207"/><polygon fill="#181818" points="2436.2554,810.207,2426.2554,814.207,2436.2554,818.207,2432.2554,814.207" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272.0732" x="2432.2554" y="781.1543">calculateLatePaymentPenalty(paymentDate)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.8232" x="2432.2554" y="796.4648">(amount &#215; 0.001 &#215; daysAfter)</text></g><g class="message" data-participant-1="Installment" data-participant-2="Installment"><line style="stroke:#181818;stroke-width:1;" x1="2425.2554" x2="2467.2554" y1="843.5176" y2="843.5176"/><line style="stroke:#181818;stroke-width:1;" x1="2467.2554" x2="2467.2554" y1="843.5176" y2="856.5176"/><line style="stroke:#181818;stroke-width:1;" x1="2426.2554" x2="2467.2554" y1="856.5176" y2="856.5176"/><polygon fill="#181818" points="2436.2554,852.5176,2426.2554,856.5176,2436.2554,860.5176,2432.2554,856.5176" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287.9043" x="2432.2554" y="838.7754">Effective amount = base - discount + penalty</text></g><g class="message" data-participant-1="Installment" data-participant-2="CalcService"><polygon fill="#181818" points="2736.2129,881.8281,2746.2129,885.8281,2736.2129,889.8281,2740.2129,885.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="2420.2554" x2="2742.2129" y1="885.8281" y2="885.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.7075" x="2427.2554" y="881.0859">effective amount</text></g><g class="message" data-participant-1="CalcService" data-participant-2="CalcService"><line style="stroke:#181818;stroke-width:1;" x1="2758.2129" x2="2800.2129" y1="915.1387" y2="915.1387"/><line style="stroke:#181818;stroke-width:1;" x1="2800.2129" x2="2800.2129" y1="915.1387" y2="928.1387"/><line style="stroke:#181818;stroke-width:1;" x1="2759.2129" x2="2800.2129" y1="928.1387" y2="928.1387"/><polygon fill="#181818" points="2769.2129,924.1387,2759.2129,928.1387,2769.2129,932.1387,2765.2129,928.1387" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308.7373" x="2765.2129" y="910.3965">Check if payment amount covers this installment</text></g><path d="M2645.9204,943.1387 L2728.9302,943.1387 L2728.9302,950.4492 L2718.9302,960.4492 L2645.9204,960.4492 L2645.9204,943.1387" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="390.8188" x="2645.9204" y="943.1387"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38.0098" x="2660.9204" y="956.707">break</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171.3916" x="2743.9302" y="955.7734">[Payment amount insufficient]</text><g class="message" data-participant-1="CalcService" data-participant-2="CalcService"><line style="stroke:#181818;stroke-width:1;" x1="2758.2129" x2="2800.2129" y1="981.7598" y2="981.7598"/><line style="stroke:#181818;stroke-width:1;" x1="2800.2129" x2="2800.2129" y1="981.7598" y2="994.7598"/><line style="stroke:#181818;stroke-width:1;" x1="2759.2129" x2="2800.2129" y1="994.7598" y2="994.7598"/><polygon fill="#181818" points="2769.2129,990.7598,2759.2129,994.7598,2769.2129,998.7598,2765.2129,994.7598" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249.5264" x="2765.2129" y="977.0176">Stop processing remaining installments</text></g><g class="message" data-participant-1="CalcService" data-participant-2="CalcService"><line style="stroke:#181818;stroke-width:1;" x1="2758.2129" x2="2800.2129" y1="1053.3809" y2="1053.3809"/><line style="stroke:#181818;stroke-width:1;" x1="2800.2129" x2="2800.2129" y1="1053.3809" y2="1066.3809"/><line style="stroke:#181818;stroke-width:1;" x1="2759.2129" x2="2800.2129" y1="1066.3809" y2="1066.3809"/><polygon fill="#181818" points="2769.2129,1062.3809,2759.2129,1066.3809,2769.2129,1070.3809,2765.2129,1066.3809" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.7163" x="2765.2129" y="1033.3281">Validate advance payment rules</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.9019" x="2765.2129" y="1048.6387">(max 3 months ahead)</text></g><g class="message" data-participant-1="CalcService" data-participant-2="PaymentService"><polygon fill="#181818" points="1003.4512,1107.002,993.4512,1111.002,1003.4512,1115.002,999.4512,1111.002" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="997.4512" x2="2752.2129" y1="1111.002" y2="1111.002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5127" x="1009.4512" y="1090.9492">PaymentCalculationResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297.3623" x="1009.4512" y="1106.2598">{installmentsToPay, totalDiscount, totalPenalty}</text></g><path d="M20,1126.002 L82.1387,1126.002 L82.1387,1133.3125 L72.1387,1143.3125 L20,1143.3125 L20,1126.002" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1912.793" style="stroke:#000000;stroke-width:1.5;" width="3291.0469" x="20" y="1126.002"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="35" y="1139.5703">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167.2988" x="97.1387" y="1138.6367">[No Installments Can Be Paid]</text><g class="message" data-participant-1="PaymentService" data-participant-2="Controller"><polygon fill="#181818" points="616.4731,1160.623,606.4731,1164.623,616.4731,1168.623,612.4731,1164.623" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="610.4731" x2="991.4512" y1="1164.623" y2="1164.623"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="355.2212" x="622.4731" y="1159.8809">throw BusinessException("Payment amount insufficient")</text></g><g class="message" data-participant-1="Controller" data-participant-2="User"><polygon fill="#181818" points="106.7822,1189.9336,96.7822,1193.9336,106.7822,1197.9336,102.7822,1193.9336" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="100.7822" x2="604.4731" y1="1193.9336" y2="1193.9336"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1709" x="112.7822" y="1189.1914">400 Bad Request</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="20" x2="3311.0469" y1="1202.9336" y2="1202.9336"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="148.1938" x="25" y="1213.5684">[Installments Can Be Paid]</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="1237.5439"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="1237.5439" y2="1237.5439"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="1240.5439" y2="1240.5439"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="136.5605" x="1597.2432" y="1226.8887"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="118.2759" x="1603.2432" y="1243.457">Payment Creation</text><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentService"><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="1034.4512" y1="1281.5098" y2="1281.5098"/><line style="stroke:#181818;stroke-width:1;" x1="1034.4512" x2="1034.4512" y1="1281.5098" y2="1294.5098"/><line style="stroke:#181818;stroke-width:1;" x1="993.4512" x2="1034.4512" y1="1294.5098" y2="1294.5098"/><polygon fill="#181818" points="1003.4512,1290.5098,993.4512,1294.5098,1003.4512,1298.5098,999.4512,1294.5098" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.0581" x="999.4512" y="1276.7676">Generate PaymentId</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentAggregate"><polygon fill="#181818" points="1868.2266,1319.8203,1878.2266,1323.8203,1868.2266,1327.8203,1872.2266,1323.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="1874.2266" y1="1323.8203" y2="1323.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317.6748" x="999.4512" y="1319.0781">new Payment(paymentId, loanId, paymentAmount)</text></g><g class="message" data-participant-1="PaymentAggregate" data-participant-2="PaymentAggregate"><line style="stroke:#181818;stroke-width:1;" x1="1890.2266" x2="1932.2266" y1="1353.1309" y2="1353.1309"/><line style="stroke:#181818;stroke-width:1;" x1="1932.2266" x2="1932.2266" y1="1353.1309" y2="1366.1309"/><line style="stroke:#181818;stroke-width:1;" x1="1891.2266" x2="1932.2266" y1="1366.1309" y2="1366.1309"/><polygon fill="#181818" points="1901.2266,1362.1309,1891.2266,1366.1309,1901.2266,1370.1309,1897.2266,1366.1309" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.0381" x="1897.2266" y="1348.3887">Set status = INITIATED</text></g><g class="message" data-participant-1="PaymentAggregate" data-participant-2="PaymentAggregate"><line style="stroke:#181818;stroke-width:1;" x1="1890.2266" x2="1932.2266" y1="1395.4414" y2="1395.4414"/><line style="stroke:#181818;stroke-width:1;" x1="1932.2266" x2="1932.2266" y1="1395.4414" y2="1408.4414"/><line style="stroke:#181818;stroke-width:1;" x1="1891.2266" x2="1932.2266" y1="1408.4414" y2="1408.4414"/><polygon fill="#181818" points="1901.2266,1404.4414,1891.2266,1408.4414,1901.2266,1412.4414,1897.2266,1408.4414" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.6519" x="1897.2266" y="1390.6992">raiseEvent(PaymentInitiated)</text></g><g class="message" data-participant-1="PaymentAggregate" data-participant-2="PaymentService"><polygon fill="#181818" points="1003.4512,1433.752,993.4512,1437.752,1003.4512,1441.752,999.4512,1437.752" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="997.4512" x2="1884.2266" y1="1437.752" y2="1437.752"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.0396" x="1009.4512" y="1433.0098">payment instance</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="1466.4072"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="1466.4072" y2="1466.4072"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="1469.4072" y2="1469.4072"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="232.4355" x="1549.3057" y="1455.752"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="214.1509" x="1555.3057" y="1472.3203">Installment Payment Processing</text><path d="M884.5708,1496.0625 L959.0176,1496.0625 L959.0176,1503.373 L949.0176,1513.373 L884.5708,1513.373 L884.5708,1496.0625" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="258.1738" style="stroke:#000000;stroke-width:1.5;" width="1841.5737" x="884.5708" y="1496.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="899.5708" y="1509.6309">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="162.5347" x="974.0176" y="1508.6973">[For each installment to pay]</text><g class="message" data-participant-1="PaymentService" data-participant-2="Installment"><polygon fill="#181818" points="2403.2554,1530.6836,2413.2554,1534.6836,2403.2554,1538.6836,2407.2554,1534.6836" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="2409.2554" y1="1534.6836" y2="1534.6836"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322.6831" x="999.4512" y="1529.9414">processPayment(installmentAmount, paymentDate)</text></g><g class="message" data-participant-1="Installment" data-participant-2="Installment"><line style="stroke:#181818;stroke-width:1;" x1="2425.2554" x2="2467.2554" y1="1563.9941" y2="1563.9941"/><line style="stroke:#181818;stroke-width:1;" x1="2467.2554" x2="2467.2554" y1="1563.9941" y2="1576.9941"/><line style="stroke:#181818;stroke-width:1;" x1="2426.2554" x2="2467.2554" y1="1576.9941" y2="1576.9941"/><polygon fill="#181818" points="2436.2554,1572.9941,2426.2554,1576.9941,2436.2554,1580.9941,2432.2554,1576.9941" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.8696" x="2432.2554" y="1559.252">Validate not already paid</text></g><g class="message" data-participant-1="Installment" data-participant-2="Installment"><line style="stroke:#181818;stroke-width:1;" x1="2425.2554" x2="2467.2554" y1="1606.3047" y2="1606.3047"/><line style="stroke:#181818;stroke-width:1;" x1="2467.2554" x2="2467.2554" y1="1606.3047" y2="1619.3047"/><line style="stroke:#181818;stroke-width:1;" x1="2426.2554" x2="2467.2554" y1="1619.3047" y2="1619.3047"/><polygon fill="#181818" points="2436.2554,1615.3047,2426.2554,1619.3047,2436.2554,1623.3047,2432.2554,1619.3047" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271.8892" x="2432.2554" y="1601.5625">Validate full payment (no partial payments)</text></g><g class="message" data-participant-1="Installment" data-participant-2="Installment"><line style="stroke:#181818;stroke-width:1;" x1="2425.2554" x2="2467.2554" y1="1648.6152" y2="1648.6152"/><line style="stroke:#181818;stroke-width:1;" x1="2467.2554" x2="2467.2554" y1="1648.6152" y2="1661.6152"/><line style="stroke:#181818;stroke-width:1;" x1="2426.2554" x2="2467.2554" y1="1661.6152" y2="1661.6152"/><polygon fill="#181818" points="2436.2554,1657.6152,2426.2554,1661.6152,2436.2554,1665.6152,2432.2554,1661.6152" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.4702" x="2432.2554" y="1643.873">Set paidAmount = amount</text></g><g class="message" data-participant-1="Installment" data-participant-2="Installment"><line style="stroke:#181818;stroke-width:1;" x1="2425.2554" x2="2467.2554" y1="1690.9258" y2="1690.9258"/><line style="stroke:#181818;stroke-width:1;" x1="2467.2554" x2="2467.2554" y1="1690.9258" y2="1703.9258"/><line style="stroke:#181818;stroke-width:1;" x1="2426.2554" x2="2467.2554" y1="1703.9258" y2="1703.9258"/><polygon fill="#181818" points="2436.2554,1699.9258,2426.2554,1703.9258,2436.2554,1707.9258,2432.2554,1703.9258" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.3345" x="2432.2554" y="1686.1836">Set paymentDate = now</text></g><g class="message" data-participant-1="Installment" data-participant-2="Installment"><line style="stroke:#181818;stroke-width:1;" x1="2425.2554" x2="2467.2554" y1="1738.2363" y2="1738.2363"/><line style="stroke:#181818;stroke-width:1;" x1="2467.2554" x2="2467.2554" y1="1738.2363" y2="1751.2363"/><line style="stroke:#181818;stroke-width:1;" x1="2420.2554" x2="2467.2554" y1="1751.2363" y2="1751.2363"/><polygon fill="#181818" points="2430.2554,1747.2363,2420.2554,1751.2363,2430.2554,1755.2363,2426.2554,1751.2363" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.9619" x="2432.2554" y="1733.4941">Set isPaid = true</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="1781.8916"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="1781.8916" y2="1781.8916"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="1784.8916" y2="1784.8916"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="147.7197" x="1591.6636" y="1771.2363"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129.4351" x="1597.6636" y="1787.8047">Loan Status Update</text><g class="message" data-participant-1="PaymentService" data-participant-2="LoanAggregate"><polygon fill="#181818" points="2162.9058,1821.8574,2172.9058,1825.8574,2162.9058,1829.8574,2166.9058,1825.8574" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="2168.9058" y1="1825.8574" y2="1825.8574"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.4897" x="999.4512" y="1821.1152">isFullyPaid()</text></g><g class="message" data-participant-1="LoanAggregate" data-participant-2="LoanAggregate"><line style="stroke:#181818;stroke-width:1;" x1="2184.9058" x2="2226.9058" y1="1855.168" y2="1855.168"/><line style="stroke:#181818;stroke-width:1;" x1="2226.9058" x2="2226.9058" y1="1855.168" y2="1868.168"/><line style="stroke:#181818;stroke-width:1;" x1="2185.9058" x2="2226.9058" y1="1868.168" y2="1868.168"/><polygon fill="#181818" points="2195.9058,1864.168,2185.9058,1868.168,2195.9058,1872.168,2191.9058,1868.168" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.3496" x="2191.9058" y="1850.4258">Check if all installments are paid</text></g><g class="message" data-participant-1="LoanAggregate" data-participant-2="PaymentService"><polygon fill="#181818" points="1003.4512,1893.4785,993.4512,1897.4785,1003.4512,1901.4785,999.4512,1897.4785" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="997.4512" x2="2178.9058" y1="1897.4785" y2="1897.4785"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.0249" x="1009.4512" y="1892.7363">isFullyPaid result</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="1926.1338"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="1926.1338" y2="1926.1338"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="1929.1338" y2="1929.1338"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="198.812" x="1566.1174" y="1915.4785"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="180.5273" x="1572.1174" y="1932.0469">Payment Result Processing</text><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentService"><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="1034.4512" y1="1985.4102" y2="1985.4102"/><line style="stroke:#181818;stroke-width:1;" x1="1034.4512" x2="1034.4512" y1="1985.4102" y2="1998.4102"/><line style="stroke:#181818;stroke-width:1;" x1="993.4512" x2="1034.4512" y1="1998.4102" y2="1998.4102"/><polygon fill="#181818" points="1003.4512,1994.4102,993.4512,1998.4102,1003.4512,2002.4102,999.4512,1998.4102" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1982" x="999.4512" y="1965.3574">Create PaymentResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="390.73" x="999.4512" y="1980.668">{installmentsPaid, totalDiscount, totalPenalty, isLoanFullyPaid}</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentAggregate"><polygon fill="#181818" points="1868.2266,2023.7207,1878.2266,2027.7207,1868.2266,2031.7207,1872.2266,2027.7207" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="1874.2266" y1="2027.7207" y2="2027.7207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.8042" x="999.4512" y="2022.9785">processPayment(paymentResult)</text></g><g class="message" data-participant-1="PaymentAggregate" data-participant-2="PaymentAggregate"><line style="stroke:#181818;stroke-width:1;" x1="1890.2266" x2="1932.2266" y1="2057.0313" y2="2057.0313"/><line style="stroke:#181818;stroke-width:1;" x1="1932.2266" x2="1932.2266" y1="2057.0313" y2="2070.0313"/><line style="stroke:#181818;stroke-width:1;" x1="1891.2266" x2="1932.2266" y1="2070.0313" y2="2070.0313"/><polygon fill="#181818" points="1901.2266,2066.0313,1891.2266,2070.0313,1901.2266,2074.0313,1897.2266,2070.0313" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260.6792" x="1897.2266" y="2052.2891">Set installmentsPaid, discounts, penalties</text></g><g class="message" data-participant-1="PaymentAggregate" data-participant-2="PaymentAggregate"><line style="stroke:#181818;stroke-width:1;" x1="1890.2266" x2="1932.2266" y1="2099.3418" y2="2099.3418"/><line style="stroke:#181818;stroke-width:1;" x1="1932.2266" x2="1932.2266" y1="2099.3418" y2="2112.3418"/><line style="stroke:#181818;stroke-width:1;" x1="1891.2266" x2="1932.2266" y1="2112.3418" y2="2112.3418"/><polygon fill="#181818" points="1901.2266,2108.3418,1891.2266,2112.3418,1901.2266,2116.3418,1897.2266,2112.3418" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.4634" x="1897.2266" y="2094.5996">Set status = COMPLETED</text></g><g class="message" data-participant-1="PaymentAggregate" data-participant-2="PaymentAggregate"><line style="stroke:#181818;stroke-width:1;" x1="1890.2266" x2="1932.2266" y1="2141.6523" y2="2141.6523"/><line style="stroke:#181818;stroke-width:1;" x1="1932.2266" x2="1932.2266" y1="2141.6523" y2="2154.6523"/><line style="stroke:#181818;stroke-width:1;" x1="1891.2266" x2="1932.2266" y1="2154.6523" y2="2154.6523"/><polygon fill="#181818" points="1901.2266,2150.6523,1891.2266,2154.6523,1901.2266,2158.6523,1897.2266,2154.6523" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.0649" x="1897.2266" y="2136.9102">raiseEvent(PaymentProcessed)</text></g><g class="message" data-participant-1="PaymentAggregate" data-participant-2="PaymentService"><polygon fill="#181818" points="1003.4512,2179.9629,993.4512,2183.9629,1003.4512,2187.9629,999.4512,2183.9629" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="997.4512" x2="1884.2266" y1="2183.9629" y2="2183.9629"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.4746" x="1009.4512" y="2179.2207">updated payment</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="2212.6182"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="2212.6182" y2="2212.6182"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="2215.6182" y2="2215.6182"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="94.6724" x="1618.1873" y="2201.9629"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="76.3877" x="1624.1873" y="2218.5313">Persistence</text><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentRepo"><polygon fill="#181818" points="3078.9502,2252.584,3088.9502,2256.584,3078.9502,2260.584,3082.9502,2256.584" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="3084.9502" y1="2256.584" y2="2256.584"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.6953" x="999.4512" y="2251.8418">save(payment)</text></g><g class="message" data-participant-1="PaymentRepo" data-participant-2="PaymentService"><polygon fill="#181818" points="1003.4512,2281.8945,993.4512,2285.8945,1003.4512,2289.8945,999.4512,2285.8945" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="997.4512" x2="3094.9502" y1="2285.8945" y2="2285.8945"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.5356" x="1009.4512" y="2281.1523">saved payment</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="2314.5498"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="2314.5498" y2="2314.5498"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="2317.5498" y2="2317.5498"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="238.6689" x="1546.189" y="2303.8945"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220.3843" x="1552.189" y="2320.4629">Credit Release (if loan fully paid)</text><path d="M884.5708,2344.2051 L946.7095,2344.2051 L946.7095,2351.5156 L936.7095,2361.5156 L884.5708,2361.5156 L884.5708,2344.2051" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="308.4844" style="stroke:#000000;stroke-width:1.5;" width="2416.4761" x="884.5708" y="2344.2051"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="899.5708" y="2357.7734">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93.7041" x="961.7095" y="2356.8398">[Loan Fully Paid]</text><g class="message" data-participant-1="PaymentService" data-participant-2="LoanService"><polygon fill="#181818" points="1380.1812,2378.8262,1390.1812,2382.8262,1380.1812,2386.8262,1384.1812,2382.8262" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="1386.1812" y1="2382.8262" y2="2382.8262"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.0161" x="999.4512" y="2378.084">markLoanAsFullyPaid(loanId)</text></g><g class="message" data-participant-1="LoanService" data-participant-2="LoanAggregate"><polygon fill="#181818" points="2162.9058,2408.1367,2172.9058,2412.1367,2162.9058,2416.1367,2166.9058,2412.1367" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1402.1812" x2="2168.9058" y1="2412.1367" y2="2412.1367"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.5894" x="1409.1812" y="2407.3945">markAsPaid()</text></g><g class="message" data-participant-1="LoanAggregate" data-participant-2="LoanAggregate"><line style="stroke:#181818;stroke-width:1;" x1="2184.9058" x2="2226.9058" y1="2446.4473" y2="2446.4473"/><line style="stroke:#181818;stroke-width:1;" x1="2226.9058" x2="2226.9058" y1="2446.4473" y2="2459.4473"/><line style="stroke:#181818;stroke-width:1;" x1="2179.9058" x2="2226.9058" y1="2459.4473" y2="2459.4473"/><polygon fill="#181818" points="2189.9058,2455.4473,2179.9058,2459.4473,2189.9058,2463.4473,2185.9058,2459.4473" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.9619" x="2191.9058" y="2441.7051">Set isPaid = true</text></g><g class="message" data-participant-1="LoanService" data-participant-2="CustomerService"><polygon fill="#181818" points="1688.5605,2479.7578,1698.5605,2483.7578,1688.5605,2487.7578,1692.5605,2483.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1402.1812" x2="1694.5605" y1="2483.7578" y2="2483.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279.3794" x="1409.1812" y="2479.0156">releaseCredit(customerId, totalLoanAmount)</text></g><g class="message" data-participant-1="CustomerService" data-participant-2="CustomerService"><line style="stroke:#181818;stroke-width:1;" x1="1710.5605" x2="1752.5605" y1="2513.0684" y2="2513.0684"/><line style="stroke:#181818;stroke-width:1;" x1="1752.5605" x2="1752.5605" y1="2513.0684" y2="2526.0684"/><line style="stroke:#181818;stroke-width:1;" x1="1711.5605" x2="1752.5605" y1="2526.0684" y2="2526.0684"/><polygon fill="#181818" points="1721.5605,2522.0684,1711.5605,2526.0684,1721.5605,2530.0684,1717.5605,2526.0684" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.666" x="1717.5605" y="2508.3262">Release reserved credit</text></g><g class="message" data-participant-1="CustomerService" data-participant-2="EventPub"><polygon fill="#181818" points="3217.4248,2551.3789,3227.4248,2555.3789,3217.4248,2559.3789,3221.4248,2555.3789" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1710.5605" x2="3223.4248" y1="2555.3789" y2="2555.3789"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.2656" x="1717.5605" y="2550.6367">publishAsync(CreditReleased)</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="EventPub"><polygon fill="#181818" points="3217.4248,2610.6895,3227.4248,2614.6895,3217.4248,2618.6895,3221.4248,2614.6895" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="3223.4248" y1="2614.6895" y2="2614.6895"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.0264" x="999.4512" y="2609.9473">publishAsync(LoanFullyPaid)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="2680.3447"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="2680.3447" y2="2680.3447"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="2683.3447" y2="2683.3447"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="130.3208" x="1600.363" y="2669.6895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112.0361" x="1606.363" y="2686.2578">Event Publishing</text><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentService"><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="1034.4512" y1="2724.3105" y2="2724.3105"/><line style="stroke:#181818;stroke-width:1;" x1="1034.4512" x2="1034.4512" y1="2724.3105" y2="2737.3105"/><line style="stroke:#181818;stroke-width:1;" x1="993.4512" x2="1034.4512" y1="2737.3105" y2="2737.3105"/><polygon fill="#181818" points="1003.4512,2733.3105,993.4512,2737.3105,1003.4512,2741.3105,999.4512,2737.3105" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.7168" x="999.4512" y="2719.5684">Get domain events from payment</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="EventPub"><polygon fill="#181818" points="3217.4248,2762.6211,3227.4248,2766.6211,3217.4248,2770.6211,3221.4248,2766.6211" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="3223.4248" y1="2766.6211" y2="2766.6211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.749" x="999.4512" y="2761.8789">publishAsync(PaymentProcessed)</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentAggregate"><polygon fill="#181818" points="1868.2266,2821.9316,1878.2266,2825.9316,1868.2266,2829.9316,1872.2266,2825.9316" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="1874.2266" y1="2825.9316" y2="2825.9316"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.0513" x="999.4512" y="2821.1895">clearDomainEvents()</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="Controller"><polygon fill="#181818" points="616.4731,2896.5527,606.4731,2900.5527,616.4731,2904.5527,612.4731,2900.5527" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="610.4731" x2="991.4512" y1="2900.5527" y2="2900.5527"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.2441" x="622.4731" y="2880.5">PaymentResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="362.978" x="622.4731" y="2895.8105">{paymentId, installmentsPaid, totalSpent, isLoanFullyPaid}</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="2929.208"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="2929.208" y2="2929.208"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="2932.208" y2="2932.208"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="82.6436" x="1624.2017" y="2918.5527"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64.3589" x="1630.2017" y="2935.1211">Response</text><g class="message" data-participant-1="Controller" data-participant-2="Controller"><line style="stroke:#181818;stroke-width:1;" x1="605.4731" x2="647.4731" y1="2973.1738" y2="2973.1738"/><line style="stroke:#181818;stroke-width:1;" x1="647.4731" x2="647.4731" y1="2973.1738" y2="2986.1738"/><line style="stroke:#181818;stroke-width:1;" x1="606.4731" x2="647.4731" y1="2986.1738" y2="2986.1738"/><polygon fill="#181818" points="616.4731,2982.1738,606.4731,2986.1738,616.4731,2990.1738,612.4731,2986.1738" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.106" x="612.4731" y="2968.4316">Convert to PaymentResponse DTO</text></g><g class="message" data-participant-1="Controller" data-participant-2="User"><polygon fill="#181818" points="106.7822,3026.7949,96.7822,3030.7949,106.7822,3034.7949,102.7822,3030.7949" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="100.7822" x2="604.4731" y1="3030.7949" y2="3030.7949"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.7969" x="112.7822" y="3010.7422">201 Created</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="485.6909" x="112.7822" y="3026.0527">PaymentResponse{paymentId, installmentsPaid, totalAmountSpent, message}</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3331.0469" x="0" y="3073.4502"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="3073.4502" y2="3073.4502"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3331.0469" y1="3076.4502" y2="3076.4502"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="239.9321" x="1545.5574" y="3062.7949"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="221.6475" x="1551.5574" y="3079.3633">Error Handling (Alternative Flow)</text><path d="M20,3103.1055 L249.1836,3103.1055 L249.1836,3110.416 L239.1836,3120.416 L20,3120.416 L20,3103.1055" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="280.7949" style="stroke:#000000;stroke-width:1.5;" width="3157.8027" x="20" y="3103.1055"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184.1836" x="35" y="3116.6738">Payment Processing Failure</text><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentRepo"><polygon fill="#181818" points="3078.9502,3137.7266,3088.9502,3141.7266,3078.9502,3145.7266,3082.9502,3141.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="3084.9502" y1="3141.7266" y2="3141.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.5757" x="999.4512" y="3136.9844">save(payment) throws Exception</text></g><g class="message" data-participant-1="PaymentRepo" data-participant-2="PaymentService"><polygon fill="#181818" points="1003.4512,3167.0371,993.4512,3171.0371,1003.4512,3175.0371,999.4512,3171.0371" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="997.4512" x2="3094.9502" y1="3171.0371" y2="3171.0371"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.9644" x="1009.4512" y="3166.2949">DatabaseException</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentAggregate"><polygon fill="#181818" points="1868.2266,3196.3477,1878.2266,3200.3477,1868.2266,3204.3477,1872.2266,3200.3477" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="1874.2266" y1="3200.3477" y2="3200.3477"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.5742" x="999.4512" y="3195.6055">markAsFailed("Database error")</text></g><g class="message" data-participant-1="PaymentAggregate" data-participant-2="PaymentAggregate"><line style="stroke:#181818;stroke-width:1;" x1="1890.2266" x2="1932.2266" y1="3234.6582" y2="3234.6582"/><line style="stroke:#181818;stroke-width:1;" x1="1932.2266" x2="1932.2266" y1="3234.6582" y2="3247.6582"/><line style="stroke:#181818;stroke-width:1;" x1="1885.2266" x2="1932.2266" y1="3247.6582" y2="3247.6582"/><polygon fill="#181818" points="1895.2266,3243.6582,1885.2266,3247.6582,1895.2266,3251.6582,1891.2266,3247.6582" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.4048" x="1897.2266" y="3229.916">Set status = FAILED</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="PaymentRepo"><polygon fill="#181818" points="3078.9502,3267.9688,3088.9502,3271.9688,3078.9502,3275.9688,3082.9502,3271.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="992.4512" x2="3084.9502" y1="3271.9688" y2="3271.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.6953" x="999.4512" y="3267.2266">save(payment)</text></g><g class="message" data-participant-1="PaymentService" data-participant-2="Controller"><polygon fill="#181818" points="616.4731,3327.2793,606.4731,3331.2793,616.4731,3335.2793,612.4731,3331.2793" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="610.4731" x2="991.4512" y1="3331.2793" y2="3331.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.6348" x="622.4731" y="3326.5371">throw BusinessException</text></g><g class="message" data-participant-1="Controller" data-participant-2="User"><polygon fill="#181818" points="106.7822,3371.9004,96.7822,3375.9004,106.7822,3379.9004,102.7822,3375.9004" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="100.7822" x2="604.4731" y1="3375.9004" y2="3375.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.0859" x="112.7822" y="3355.8477">500 Internal Server Error</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.1743" x="112.7822" y="3371.1582">{errorCode: "BUSINESS_ERROR"}</text></g><path d="M37,3395.9004 L37,3527.9004 L3293,3527.9004 L3293,3405.9004 L3283,3395.9004 L37,3395.9004" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M3283,3395.9004 L3283,3405.9004 L3293,3405.9004 L3283,3395.9004" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166.7402" x="1457.5984" y="3413.4688">Business Rules Enforced:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="1457.5984" y="3428.7793">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.3335" x="1457.5984" y="3444.0898">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="137.541" x="1474.0452" y="3444.0898">No Partial Payments:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.3428" x="1615.6995" y="3444.0898">Must pay full installment amount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.3335" x="1457.5984" y="3459.4004">2.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103.4731" x="1474.0452" y="3459.4004">Payment Order:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.8613" x="1581.6316" y="3459.4004">Earliest unpaid installments first</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.3335" x="1457.5984" y="3474.7109">3.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159.5103" x="1474.0452" y="3474.7109">Advance Payment Limit:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.6064" x="1637.6687" y="3474.7109">Maximum 3 months ahead</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.3335" x="1457.5984" y="3490.0215">4.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="161.624" x="1474.0452" y="3490.0215">Early Payment Discount:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223.666" x="1639.7825" y="3490.0215">amount &#215; 0.001 &#215; days before due</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.3335" x="1457.5984" y="3505.332">5.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145.939" x="1474.0452" y="3505.332">Late Payment Penalty:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.2974" x="1624.0974" y="3505.332">amount &#215; 0.001 &#215; days after due</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.3335" x="1457.5984" y="3520.6426">6.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99.436" x="1474.0452" y="3520.6426">Credit Release:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195.7744" x="1577.5945" y="3520.6426">Automatic when loan fully paid</text><path d="M2563,3538.3848 L2563,3685.3848 L2942,3685.3848 L2942,3548.3848 L2932,3538.3848 L2563,3538.3848" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2932,3538.3848 L2932,3548.3848 L2942,3548.3848 L2932,3538.3848" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="211.0278" x="2569" y="3555.9531">Payment Calculation Algorithm:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="2569" y="3571.2637">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.9478" x="2569" y="3586.5742">1. Sort installments by due date</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.5288" x="2569" y="3601.8848">2. For each installment:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="346.6265" x="2581.3398" y="3617.1953">- Calculate effective amount (base &#177; discount/penalty)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267.96" x="2581.3398" y="3632.5059">- Check if payment covers this installment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.7095" x="2581.3398" y="3647.8164">- Add to payment if sufficient funds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.1631" x="2569" y="3663.127">3. Validate advance payment rules</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.2632" x="2569" y="3678.4375">4. Return calculation result</text><path d="M1737,3696.1797 L1737,3813.1797 L2032,3813.1797 L2032,3706.1797 L2022,3696.1797 L1737,3696.1797" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2022,3696.1797 L2022,3706.1797 L2032,3706.1797 L2022,3696.1797" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="157.5107" x="1743" y="3713.748">Payment State Machine:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="1743" y="3729.0586">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260.2349" x="1743" y="3744.3691">INITIATED &#8594; PROCESSING &#8594; COMPLETED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.5122" x="1784.1328" y="3759.6797">&#8600; FAILED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41.1328" x="1743" y="3774.9902">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274.8027" x="1743" y="3790.3008">Only INITIATED payments can be processed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.8047" x="1743" y="3805.6113">Failed payments cannot be retried</text><!--SRC=[lLdRRjl86RxdK_phtiYeivQTGr4XDa39SbQ0OWcItAi0Yp4viWUXXkoGj2C4ljq7w4tx6ds5zatsIVhF36SuF8YcTnSraCGavp_CV_Z-Gtu8wPPn2lvairZzF5dC5oluqpl_hyFfkVT3yMsokDci5lFvr1wuVkz_E7zh3_ZBvNmsyJUpnOqvyPVfrTlpCtlYQl7PdzcFuwkpuNHeFyvkhbV-UhEwdMnkLrChu_h3-CFOyn8YCXQmXF0CZYPvciKxAaxzSCVu4P0KRbCgNFMh14kotr6UJMAUYJYAg50qvMFZSgtaVf94B20PY_cQYaSMKCMc-5gyQfgXociU4tw0aVpKauknm05EvdDFRiKDtDluz_U2tfEiwhJcLQpYVGbcFCr855bvpdC7fN4WYO8yQbuNNvkhliXZHPCuPLaizkvzvTlM4Apoc3xYsML-5x7qeOWYywgTshkuC29WAUA0fYdZzx2YVyzfci75XUUfq7rpwORZ29QBzGPEIS9E7yzE8xHRUlfT_ZCBdqyJpI_zmhyNl_gxEEVPiqU2Z3rA7vIyFC_XMvVoDnAnK9uNMfylV40KAxY4uN6Tj1Re8qZqXOhtWsNbSHBlTeI7nwLILNfb6XaHHWjqgh97JGmATXDZ1FSqaoy6sXmEV-UOvxaq1OioH4U0a1EEzxEmdOizwLNftZIKaUGGqeomAFL2Ue1BLPisKqe-TNfxbwP56lJMaqeX-esbMGfeVk1n1jiyYlQG41Pw7eaoRNK_4fI4UxXM7vVo8-1FNLOzPB874J_1ECSmHbzFlmKqaPuRgEG6Xa8BlgNGesF5sGqcvAh2VWJlXaCOaz1aX3hfsA4MCxMlJfZJADLMWvzaEU1Ii0ikQIKL7I3fY3atO33gD5ENv-0LSTDmsHnzzB46YPSTCTJKqSMz4GJ5dQZ9H-PeUW8wiK-WW8mhFEXexx3ol2YE4xYE1Q0k3v1hMphSO72tXp2d42ecohcEAgYPY-gEPjFjbag9HaMDMuEAIfARLSlXepwelrpc7RA8YFQ5d2kM1Wr99TZzzvym_74uF9E_X6IVZkas5eKg_OJDIxClASSSs_SKvMypAdf8ifOh_0WNS4Smujz0MDmD_Wo95dt0Kes0eJMUzUngDNxDqLMEamSQV0MsDK5cb0tYHofIn0x41zR6zGunuwlDpe8AJ-RRBTPUS_H5-UiC0pSfowoWEyAu_CtD1SMByj2JVxnEXXPMIVX8EBuo5nDvHB403tRa6xo57UBG0qBV0oBVSOrbM-etsvaLJVC8w-ztLz5DZ0TF88lnZGdXuh68icSNBoevB77-9guW81xWCAP_0DPtEEh_1_O7hrO1UWoi3fHlUEOJvLGukip23ZAtFd3wP5wRr9-59w3R2ukw6l2QFL4JvftYqIflJJF0-sTvYb0mkvbjPlvcUjMNMX2MKjMv3in5ESiOVfJnssJIslqL9bOHYxdXDJtfN0jzug9HIqyiFLIjF6x9oM8fi3LiwrXPQqiTBdvR3VoT1ST2XEoqJFEJc1JhHofx9MlF0PTNnQ63s7TfZmeX0qAAzKrzS42z1w4r25Bo-AaV6KjbmY559d9Qskj03L5mQvh-jOxTsqGPe5yFnbBLh4gPlJkl9XTRf52lIbq08gZsN8_kpT45oum4xuxMpG4a3VJrkE-1J0h9Q3cljjGBgKndkJX1jQLgLlNddkXMIwd4LUAFGhFcJKnhWzshRcqOJNyJFauMdvVpwU_2ny9Xhy37N8LsQ7BhHNXSOek48m6LRKPdJAXTnGXIyaYD9ve-a8Sybw1LHycZIqF5HIg7qHSo6RqHbMtd0DD7JPhbb7UibBRZvGjZPNsEtX7nLIMDa-9cDAy0j3iOMy1vOTYNpFsqW8q6jz8BXbKdVBJZti7SFwHZVKM7CQTjgoqz28hlCvFHYctHFbJkKEFajEer4QrIZKSHm_0T1aEWv1zYOBTTY0bw3UQdUnuCjDO5ixhF357TKfNtZNQlvLe75YIMl1bbX_IjeE1hrJM5JBs0OXtu2YZ_X24Knd8q0VgeAizMn3kRXlrlqSIcfh9j5-W7-W4wKrmfFHLbPTtHWB1EU7jfqgXNDQU3Fb3WrbWHifPwTdYSa1v30KdCKmsm7OjHVC29LNMTfMgQycgpyDgdctCSwtML3h_m6bcF6-daBkwrGt-IUrgTxvobhXrVPHWAWHtpJuI7aGp2WHzbL72Y9llhA7xIo7mluZnfwxkl2OjoGGyaK4VDqVDX2dOmhAQHMq8SteUB4NQVH2urglmE5AMEd6y9PLq1v4rfE3WoWe1AonqTj-fTXV3VqdLS-xCvjXpjbsYf4Ayh-9ssVgtHUax-7QFzUnpjPrm5NWIIBxvLWOdPhCmyYKCwWgFnxNfsCrslVvwkLelLqREEOfoTACWbaM9tKeNWZtUNHXDOoRqBJFas5W4DHnzFxoxBMvtzAC_Uo9pLurDnpLITWyzOKIJ8wd7B7IwTKUbSyJ1fiX0X5PfQxXEP_3-RvZuKyPk9OftnLj7xnRh8y9cp7SiABSWtjijtjQsHedsdQDNYqbAQHbuJ7zWYmftQMCgTh6BqNZ6QE-w7OWBePaFaDj9o-Q2uL3i_JU_dM9eHO09uUg2ytWbAbyffcBf-TPTJXLFRbl5-T1yBbZticgvTnw8w982pXJQ-QziTZCpoy8qLHHlBJnWeHFZFl-tKSLgiKuyTylf-iskngIZyC2nM5tfNieLoLOOcus5gegPxrMZYOqMpN72xU9OcAwRFDgEtOerZUJc4Kup80BiNMhEutId1hx_y0vQhnGIpTdRpIJsM0nLKVdxzvLykx9K_wd71CK9AlcQvWRVX6C5coAGw6JHOLmx93SkTR5KpmQWJPly3]--></g></svg>